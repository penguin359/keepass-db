<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A trait which represents a sink of notifications that a future is ready to make progress."><title>Notify in futures::executor - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-f3501f0f5ae15dfb.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="futures" data-themes="" data-resource-suffix="" data-rustdoc-version="1.71.0 (8ede3aae2 2023-07-12)" data-search-js="search-4926e5fc22a5646a.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../../static.files/storage-62ce34ea385b278a.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-f0540c1d82cde29b.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../futures/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../futures/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Notify</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.notify">notify</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.clone_id">clone_id</a></li><li><a href="#method.drop_id">drop_id</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In futures::executor</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="../index.html">futures</a>::<wbr><a href="index.html">executor</a>::<wbr><a class="trait" href="#">Notify</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/futures/task_impl/mod.rs.html#426-480">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait Notify: <a class="trait" href="https://doc.rust-lang.org/1.71.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/1.71.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> {
    // Required method
    fn <a href="#tymethod.notify" class="fn">notify</a>(&amp;self, id: <a class="primitive" href="https://doc.rust-lang.org/1.71.0/std/primitive.usize.html">usize</a>);

    // Provided methods
    fn <a href="#method.clone_id" class="fn">clone_id</a>(&amp;self, id: <a class="primitive" href="https://doc.rust-lang.org/1.71.0/std/primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.71.0/std/primitive.usize.html">usize</a> { ... }
<span class="item-spacer"></span>    fn <a href="#method.drop_id" class="fn">drop_id</a>(&amp;self, id: <a class="primitive" href="https://doc.rust-lang.org/1.71.0/std/primitive.usize.html">usize</a>) { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A trait which represents a sink of notifications that a future is ready to
make progress.</p>
<p>This trait is provided as an argument to the <code>Spawn::*_notify</code> family of
functions. It’s transitively used as part of the <code>Task::notify</code> method to
internally deliver notifications of readiness of a future to move forward.</p>
<p>An instance of <code>Notify</code> has one primary method, <code>notify</code>, which is given a
contextual argument as to what’s being notified. This contextual argument is
<em>also</em> provided to the <code>Spawn::*_notify</code> family of functions and can be used
to reuse an instance of <code>Notify</code> across many futures.</p>
<p>Instances of <code>Notify</code> must be safe to share across threads, and the methods
be invoked concurrently. They must also live for the <code>'static</code> lifetime,
not containing any stack references.</p>
</div></details><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.notify" class="method"><a class="srclink rightside" href="../../src/futures/task_impl/mod.rs.html#444">source</a><h4 class="code-header">fn <a href="#tymethod.notify" class="fn">notify</a>(&amp;self, id: <a class="primitive" href="https://doc.rust-lang.org/1.71.0/std/primitive.usize.html">usize</a>)</h4></section></summary><div class="docblock"><p>Indicates that an associated future and/or task are ready to make
progress.</p>
<p>Typically this means that the receiver of the notification should
arrange for the future to get poll’d in a prompt fashion.</p>
<p>This method takes an <code>id</code> as an argument which was transitively passed
in from the original call to <code>Spawn::*_notify</code>. This id can be used to
disambiguate which precise future became ready for polling.</p>
<h5 id="panics"><a href="#panics">Panics</a></h5>
<p>Since <code>unpark</code> may be invoked from arbitrary contexts, it should
endeavor not to panic and to do as little work as possible. However, it
is not guaranteed not to panic, and callers should be wary. If a panic
occurs, that panic may or may not be propagated to the end-user of the
future that you’d otherwise wake up.</p>
</div></details></div><h2 id="provided-methods" class="small-section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.clone_id" class="method"><a class="srclink rightside" href="../../src/futures/task_impl/mod.rs.html#466-468">source</a><h4 class="code-header">fn <a href="#method.clone_id" class="fn">clone_id</a>(&amp;self, id: <a class="primitive" href="https://doc.rust-lang.org/1.71.0/std/primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.71.0/std/primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>This function is called whenever a new copy of <code>id</code> is needed.</p>
<p>This is called in one of two situations:</p>
<ul>
<li>A <code>Task</code> is being created through <code>task::current</code> while a future is
being polled. In that case the instance of <code>Notify</code> passed in to one
of the <code>poll_*</code> functions is called with the <code>id</code> passed into the same
<code>poll_*</code> function.</li>
<li>A <code>Task</code> is itself being cloned. Each <code>Task</code> contains its own id and a
handle to the <code>Notify</code> behind it, and the task’s <code>Notify</code> is used to
clone the internal <code>id</code> to assign to the new task.</li>
</ul>
<p>The <code>id</code> returned here will be stored in the <code>Task</code>-to-be and used later
to pass to <code>notify</code> when the <code>Task::notify</code> function is called on that
<code>Task</code>.</p>
<p>Note that typically this is just the identity function, passing through
the identifier. For more unsafe situations, however, if <code>id</code> is itself a
pointer of some kind this can be used as a hook to “clone” the pointer,
depending on what that means for the specified pointer.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.drop_id" class="method"><a class="srclink rightside" href="../../src/futures/task_impl/mod.rs.html#477-479">source</a><h4 class="code-header">fn <a href="#method.drop_id" class="fn">drop_id</a>(&amp;self, id: <a class="primitive" href="https://doc.rust-lang.org/1.71.0/std/primitive.usize.html">usize</a>)</h4></section></summary><div class="docblock"><p>All instances of <code>Task</code> store an <code>id</code> that they’re going to internally
notify with, and this function is called when the <code>Task</code> is dropped.</p>
<p>This function provides a hook for schemes which encode pointers in this
<code>id</code> argument to deallocate resources associated with the pointer. It’s
guaranteed that after this function is called the <code>Task</code> containing this
<code>id</code> will no longer use the <code>id</code>.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"></div><script src="../../implementors/futures/task_impl/trait.Notify.js" async></script></section></div></main></body></html>